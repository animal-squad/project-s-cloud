# alertmanager-templates-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: prometheus-server
data:
  discord.tmpl: |
    {{ define "discord.default.title" }}
    {{ if eq .Status "firing" }}
      ğŸ”´ **{{ .CommonLabels.alertname }}**
    {{ else if eq .Status "resolved" }}
      ğŸŸ¢ **{{ .CommonLabels.alertname }} Resolved**
    {{ end }}
    {{ end }}

    {{ define "discord.default.message" }}
    {{ range .Alerts }}
    **ğŸ“› Alert:** {{ .Annotations.summary }}

    **ğŸ“ Description:** {{ .Annotations.description }}

    **ğŸš¨ Severity:** {{ .Labels.severity }}

    {{ if .Labels.namespace }}
    **ğŸ“ Namespace:** {{ .Labels.namespace }}
    {{ end }}

    {{ if .Labels.pod }}
    **ğŸ³ Pod:** {{ .Labels.pod }}
    {{ end }}

    {{ if .Labels.node }}
    **ğŸ–¥ï¸ Node:** {{ .Labels.node }}
    {{ end }}

    **â° Time:** <t:{{ .StartsAt.Unix }}:F>

    **ğŸ“Š Status:** {{ .Status | toUpper }}

    {{ if eq .Status "resolved" }}
    **âœ… Resolved At:** <t:{{ .EndsAt.Unix }}:F>
    {{ end }}
    {{ end }}
    {{ end }}
